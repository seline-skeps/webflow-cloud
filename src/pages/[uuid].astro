---
import Layout from "../layouts/Layout.astro";
import { getPropertyById } from "../utils/properties";

const { uuid } = Astro.params;
const runtimeEnv = Astro.locals?.runtime?.env;

if (!uuid) {
  return Astro.redirect("/");
}

let property;
try {
  property = await getPropertyById(uuid, runtimeEnv);
} catch (error) {
  console.error("Error fetching property:", error);
  return Astro.redirect("/app");
}
---

<Layout>
  <div>
    {JSON.stringify(property)}
  </div>
</Layout>